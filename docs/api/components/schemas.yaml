# Error Response
ErrorResponse:
  type: object
  properties:
    error:
      type: string
      description: Error message
    message:
      type: string
      description: Additional error details
    code:
      type: integer
      description: HTTP status code
    details:
      type: object
      description: Additional error information
  required:
    - error

# Health Check Response
HealthResponse:
  type: object
  properties:
    status:
      type: string
      example: "healthy"
    service:
      type: string
      example: "scootin-aboot"
  required:
    - status
    - service

# Location Schema
Location:
  type: object
  properties:
    latitude:
      type: number
      format: float
      minimum: -90
      maximum: 90
      description: Latitude coordinate
    longitude:
      type: number
      format: float
      minimum: -180
      maximum: 180
      description: Longitude coordinate
  required:
    - latitude
    - longitude

# Scooter Schemas
ScooterInfo:
  type: object
  properties:
    id:
      type: string
      format: uuid
      description: Unique identifier of the scooter
    status:
      type: string
      enum: [available, occupied, maintenance, offline]
      description: Current status of the scooter
    current_latitude:
      type: number
      format: float
      minimum: -90
      maximum: 90
      description: Current latitude of the scooter
    current_longitude:
      type: number
      format: float
      minimum: -180
      maximum: 180
      description: Current longitude of the scooter
    last_seen:
      type: string
      format: date-time
      description: Timestamp when the scooter was last seen
    created_at:
      type: string
      format: date-time
      description: Timestamp when the scooter was created
  required:
    - id
    - status
    - current_latitude
    - current_longitude
    - last_seen
    - created_at

ScooterDetailsResponse:
  allOf:
    - $ref: '#/ScooterInfo'
    - type: object
      properties:
        updated_at:
          type: string
          format: date-time
          description: Timestamp when the scooter was last updated
        active_trip:
          $ref: '#/TripInfo'
          description: Active trip information if scooter is occupied
      required:
        - updated_at

ScooterListResponse:
  type: object
  properties:
    scooters:
      type: array
      items:
        $ref: '#/ScooterInfo'
      description: List of scooters
    total:
      type: integer
      format: int64
      description: Total number of scooters matching the query
    limit:
      type: integer
      description: Maximum number of scooters returned
    offset:
      type: integer
      description: Number of scooters skipped
  required:
    - scooters
    - total
    - limit
    - offset

ScooterWithDistance:
  allOf:
    - $ref: '#/ScooterInfo'
    - type: object
      properties:
        distance_meters:
          type: number
          format: float
          description: Distance from the search center in meters
      required:
        - distance_meters

ClosestScootersResponse:
  type: object
  properties:
    scooters:
      type: array
      items:
        $ref: '#/ScooterWithDistance'
      description: List of scooters sorted by distance
    center:
      $ref: '#/Location'
      description: Center point of the search
    radius_meters:
      type: number
      format: float
      description: Search radius in meters
  required:
    - scooters
    - center
    - radius_meters

# Trip Info (used in scooter details)
TripInfo:
  type: object
  properties:
    trip_id:
      type: string
      format: uuid
      description: Unique identifier of the trip
    user_id:
      type: string
      format: uuid
      description: Unique identifier of the user
    start_time:
      type: string
      format: date-time
      description: Timestamp when the trip started
    start_latitude:
      type: number
      format: float
      description: Latitude where the trip started
    start_longitude:
      type: number
      format: float
      description: Longitude where the trip started
  required:
    - trip_id
    - user_id
    - start_time
    - start_latitude
    - start_longitude
